CREATE TABLE IF NOT EXISTS ACCOUNT (
  ID       INT(10) AUTO_INCREMENT PRIMARY KEY NOT NULL,
  NAME     VARCHAR(255) AS casewhen(NAME IS null, '', NAME),
  PASSWORD VARCHAR(255) AS casewhen(PASSWORD IS null, '', PASSWORD)
);

CREATE TABLE IF NOT EXISTS PLAYLIST (
  ID               INT(10) AUTO_INCREMENT PRIMARY KEY NOT NULL,
  PKEY             VARCHAR(255)                       NOT NULL,
  PRIVATE          BOOLEAN AS casewhen(PRIVATE IS null, FALSE, PRIVATE),
  TITLE            VARCHAR(255)                       NOT NULL,
  URL              VARCHAR(255)                       NOT NULL,
  THUMBNAIL        VARCHAR(255),
  NUMBER           INT(10) AS casewhen(NUMBER IS null, 0, NUMBER),
  SUMMARY          VARCHAR(5000),
  HIDDEN           BOOLEAN AS casewhen(HIDDEN IS null, FALSE, HIDDEN),
  ACCOUNT_ID       INT(10)                            NOT NULL,
  DATE_OF_MODIFIED TIMESTAMP AS CURRENT_TIMESTAMP(),
  CONSTRAINT CONSTRAINT_36 FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS TEMPLATE (
  ID                         INT(10) AUTO_INCREMENT PRIMARY KEY NOT NULL,
  CATEGORY                   VARCHAR(255),
  COMMENT                    VARCHAR(255) AS casewhen(COMMENT IS null, 'ALLOWED', COMMENT),
  COMMENTVOTE                BOOLEAN AS casewhen(COMMENTVOTE IS null, FALSE, COMMENTVOTE),
  DEFAULTDIR                 VARCHAR(255),
  DESCRIPTION                VARCHAR(10000) AS casewhen(DESCRIPTION IS null, '', DESCRIPTION),
  EMBED                      BOOLEAN AS casewhen(EMBED IS null, FALSE, EMBED),
  KEYWORDS                   VARCHAR(1000) AS casewhen(KEYWORDS IS null, '', KEYWORDS),
  MOBILE                     BOOLEAN AS casewhen(MOBILE IS null, FALSE, MOBILE),
  NAME                       VARCHAR(255)                       NOT NULL,
  RATE                       BOOLEAN AS casewhen(RATE IS null, FALSE, RATE),
  VIDEORESPONSE              VARCHAR(255) AS casewhen(VIDEORESPONSE IS null, 'ALLOWED', VIDEORESPONSE),
  VISIBILITY                 VARCHAR(255) AS casewhen(VISIBILITY IS null, 'PUBLIC', VISIBILITY),
  ACCOUNT_ID                 INT(10),
  ENDDIR                     VARCHAR(255),
  LICENSE                    VARCHAR(255) AS casewhen(LICENSE IS null, 'YOUTUBE', LICENSE),
  TITLE                      VARCHAR(255),
  THUMBNAIL                  VARCHAR(255),
  FACEBOOK                   BOOLEAN AS casewhen(FACEBOOK IS null, FALSE, FACEBOOK),
  TWITTER                    BOOLEAN AS casewhen(TWITTER IS null, FALSE, TWITTER),
  MESSAGE                    VARCHAR(255),
  MONETIZE_INSTREAM_DEFAULTS BOOLEAN AS casewhen(MONETIZE_INSTREAM_DEFAULTS IS null, FALSE, MONETIZE_INSTREAM_DEFAULTS),
  MONETIZE_CLAIM             BOOLEAN AS casewhen(MONETIZE_CLAIM IS null, FALSE, MONETIZE_CLAIM),
  MONETIZE_OVERLAY           BOOLEAN AS casewhen(MONETIZE_OVERLAY IS null, FALSE, MONETIZE_OVERLAY),
  MONETIZE_TRUEVIEW          BOOLEAN AS casewhen(MONETIZE_TRUEVIEW IS null, FALSE, MONETIZE_TRUEVIEW),
  MONETIZE_INSTREAM          BOOLEAN AS casewhen(MONETIZE_INSTREAM IS null, FALSE, MONETIZE_INSTREAM),
  MONETIZE_PRODUCT           BOOLEAN AS casewhen(MONETIZE_PRODUCT IS null, FALSE, MONETIZE_PRODUCT),
  MONETIZE_SYNDICATION       VARCHAR(255) AS casewhen(MONETIZE_SYNDICATION IS null, 'GLOBAL', MONETIZE_SYNDICATION),
  MONETIZE_TITLE             VARCHAR(255),
  MONETIZE_DESCRIPTION       VARCHAR(255),
  MONETIZE_ID                VARCHAR(255),
  MONETIZE_NOTES             VARCHAR(255),
  MONETIZE_TMSID             VARCHAR(255),
  MONETIZE_ISAN              VARCHAR(255),
  MONETIZE_EIDR              VARCHAR(255),
  MONETIZE_TITLEEPISODE      VARCHAR(255),
  MONETIZE_SEASON_NB         VARCHAR(255),
  MONETIZE_EPISODE_NB        VARCHAR(255),
  MONETIZE_CLAIMTYPE         VARCHAR(255) AS casewhen(MONETIZE_CLAIMTYPE IS null, 'AUDIO_VISUAL', MONETIZE_CLAIMTYPE),
  MONETIZE_CLAIMOPTION       VARCHAR(255) AS casewhen(MONETIZE_CLAIMOPTION IS null, 'MONETIZE', MONETIZE_CLAIMOPTION),
  MONETIZE_ASSET             VARCHAR(255) AS casewhen(MONETIZE_ASSET IS null, 'WEB', MONETIZE_ASSET),
  MONETIZE_PARTNER           BOOLEAN AS casewhen(MONETIZE_PARTNER IS null, FALSE, MONETIZE_PARTNER),
  CONSTRAINT CONSTRAINT_1C FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ID) ON DELETE SET NULL
);

CREATE TABLE IF NOT EXISTS TEMPLATE_PLAYLIST (
  ID          INT(10) AUTO_INCREMENT PRIMARY KEY NOT NULL,
  PLAYLIST_ID INT(10)                            NOT NULL,
  TEMPLATE_ID INT(10)                            NOT NULL,
  CONSTRAINT CONSTRAINT_B88 FOREIGN KEY (TEMPLATE_ID) REFERENCES TEMPLATE (ID) ON DELETE CASCADE,
  CONSTRAINT CONSTRAINT_B8 FOREIGN KEY (PLAYLIST_ID) REFERENCES PLAYLIST (ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS UPLOAD (
  ID                         INT(10) AUTO_INCREMENT PRIMARY KEY NOT NULL,
  ARCHIVED                   BOOLEAN AS casewhen(ARCHIVED IS null, FALSE, ARCHIVED),
  CATEGORY                   VARCHAR(255),
  COMMENT                    VARCHAR(255) AS casewhen(COMMENT IS null, 'ALLOWED', COMMENT),
  COMMENTVOTE                BOOLEAN AS casewhen(COMMENTVOTE IS null, FALSE, COMMENTVOTE),
  DESCRIPTION                VARCHAR(10000) AS casewhen(DESCRIPTION IS null, '', DESCRIPTION),
  EMBED                      BOOLEAN AS casewhen(EMBED IS null, FALSE, EMBED),
  FAILED                     BOOLEAN AS casewhen(FAILED IS null, FALSE, FAILED),
  FILE                       VARCHAR(500),
  KEYWORDS                   VARCHAR(1000) AS casewhen(KEYWORDS IS null, '', KEYWORDS),
  MIMETYPE                   VARCHAR(255),
  MOBILE                     BOOLEAN AS casewhen(MOBILE IS null, FALSE, MOBILE),
  RATE                       BOOLEAN AS casewhen(RATE IS null, FALSE, RATE),
  TITLE                      VARCHAR(255),
  UPLOADURL                  VARCHAR(255),
  VIDEORESPONSE              VARCHAR(255) AS casewhen(VIDEORESPONSE IS null, 'ALLOWED', VIDEORESPONSE),
  VISIBILITY                 VARCHAR(255) AS casewhen(VISIBILITY IS null, 'PUBLIC', VISIBILITY),
  DATE_OF_START              TIMESTAMP,
  INPROGRESS                 BOOLEAN AS casewhen(INPROGRESS IS null, FALSE, INPROGRESS),
  LOCKED                     BOOLEAN AS casewhen(LOCKED IS null, FALSE, LOCKED),
  VIDEOID                    VARCHAR(255),
  ACCOUNT_ID                 INT(10),
  ENDDIR                     VARCHAR(255),
  LICENSE                    VARCHAR(255) AS casewhen(LICENSE IS null, 'YOUTUBE', LICENSE),
  DATE_OF_RELEASE            TIMESTAMP,
  PAUSEONFINISH              BOOLEAN AS casewhen(PAUSEONFINISH IS null, FALSE, PAUSEONFINISH),
  THUMBNAIL                  VARCHAR(255),
  FACEBOOK                   BOOLEAN AS casewhen(FACEBOOK IS null, FALSE, FACEBOOK),
  TWITTER                    BOOLEAN AS casewhen(TWITTER IS null, FALSE, TWITTER),
  MESSAGE                    VARCHAR(255),
  MONETIZE_INSTREAM_DEFAULTS BOOLEAN AS casewhen(MONETIZE_INSTREAM_DEFAULTS IS null, FALSE, MONETIZE_INSTREAM_DEFAULTS),
  MONETIZE_CLAIM             BOOLEAN AS casewhen(MONETIZE_CLAIM IS null, FALSE, MONETIZE_CLAIM),
  MONETIZE_OVERLAY           BOOLEAN AS casewhen(MONETIZE_OVERLAY IS null, FALSE, MONETIZE_OVERLAY),
  MONETIZE_TRUEVIEW          BOOLEAN AS casewhen(MONETIZE_TRUEVIEW IS null, FALSE, MONETIZE_TRUEVIEW),
  MONETIZE_INSTREAM          BOOLEAN AS casewhen(MONETIZE_INSTREAM IS null, FALSE, MONETIZE_INSTREAM),
  MONETIZE_PRODUCT           BOOLEAN AS casewhen(MONETIZE_PRODUCT IS null, FALSE, MONETIZE_PRODUCT),
  MONETIZE_SYNDICATION       VARCHAR(255) AS casewhen(MONETIZE_SYNDICATION IS null, 'GLOBAL', MONETIZE_SYNDICATION),
  MONETIZE_TITLE             VARCHAR(255),
  MONETIZE_DESCRIPTION       VARCHAR(255),
  MONETIZE_ID                VARCHAR(255),
  MONETIZE_NOTES             VARCHAR(255),
  MONETIZE_TMSID             VARCHAR(255),
  MONETIZE_ISAN              VARCHAR(255),
  MONETIZE_EIDR              VARCHAR(255),
  MONETIZE_TITLEEPISODE      VARCHAR(255),
  MONETIZE_SEASON_NB         VARCHAR(255),
  MONETIZE_EPISODE_NB        VARCHAR(255),
  MONETIZE_CLAIMTYPE         VARCHAR(255) AS casewhen(MONETIZE_CLAIMTYPE IS null, 'AUDIO_VISUAL', MONETIZE_CLAIMTYPE),
  MONETIZE_CLAIMOPTION       VARCHAR(255) AS casewhen(MONETIZE_CLAIMOPTION IS null, 'MONETIZE', MONETIZE_CLAIMOPTION),
  MONETIZE_ASSET             VARCHAR(255) AS casewhen(MONETIZE_ASSET IS null, 'WEB', MONETIZE_ASSET),
  MONETIZE_PARTNER           BOOLEAN AS casewhen(MONETIZE_PARTNER IS null, FALSE, MONETIZE_PARTNER),
  STATUS                     VARCHAR(255),
  CONSTRAINT CONSTRAINT_1D4 FOREIGN KEY (ACCOUNT_ID) REFERENCES ACCOUNT (ID) ON DELETE SET NULL
);

CREATE TABLE IF NOT EXISTS UPLOAD_PLAYLIST (
  ID          INT(10) AUTO_INCREMENT PRIMARY KEY NOT NULL,
  PLAYLIST_ID INT(10)                            NOT NULL,
  UPLOAD_ID   INT(10)                            NOT NULL,
  CONSTRAINT CONSTRAINT_65 FOREIGN KEY (PLAYLIST_ID) REFERENCES PLAYLIST (ID) ON DELETE CASCADE,
  CONSTRAINT CONSTRAINT_654 FOREIGN KEY (UPLOAD_ID) REFERENCES UPLOAD (ID) ON DELETE CASCADE
);

ALTER TABLE UPLOAD DROP COLUMN IF EXISTS MOBILE;
ALTER TABLE TEMPLATE DROP COLUMN IF EXISTS MOBILE;